# =============================================================================
# MMH v3.1 -- Default Configuration
# =============================================================================
# This file mirrors the defaults in src/config/settings.py.  Environment
# variables with the MMH_ prefix always take precedence over values here.
# =============================================================================

# -- General ------------------------------------------------------------------
instance_id: "mmh-node-1"
environment: "production"          # production | staging | development
dry_run: false                     # First-class dry-run mode

# -- Redis --------------------------------------------------------------------
redis_url: "redis://localhost:6379"
redis_max_memory: "2gb"
redis_stream_maxlen: 5000

# -- PostgreSQL ---------------------------------------------------------------
postgres_dsn: "postgresql://mmh:mmh@localhost:5432/mmh"

# -- RocksDB WAL --------------------------------------------------------------
wal_data_dir: "./data/wal"
wal_checkpoint_interval_seconds: 300
wal_retention_hours: 168           # 7 days

# -- ZMQ (optional fast-lane) -------------------------------------------------
zmq_enabled: false
zmq_pub_address: "tcp://127.0.0.1:5555"
zmq_sub_address: "tcp://127.0.0.1:5556"

# -- Chains -------------------------------------------------------------------
enabled_chains:
  - "solana"
  - "base"

# -- Solana -------------------------------------------------------------------
solana_rpc_url: ""
solana_ws_url: ""
helius_api_key: ""
helius_ws_url: ""
birdeye_api_key: ""
pumpportal_ws_url: "wss://pumpportal.fun/api/data"
jito_tip_lamports: 10000

# -- Base / EVM ---------------------------------------------------------------
base_rpc_url: ""
base_ws_url: ""
alchemy_api_key: ""
goplus_api_url: "https://api.gopluslabs.io/api/v1"
zerox_api_key: ""

# -- Risk limits (SAFETY > PROFIT) -------------------------------------------
max_portfolio_exposure_usd: 500.0
max_positions_per_chain: 5
max_single_position_pct: 20.0     # % of portfolio
daily_loss_limit_usd: 200.0
max_slippage_bps: 300

# -- Scoring thresholds -------------------------------------------------------
min_score_strong_buy: 80
min_score_buy: 60

# -- Position management ------------------------------------------------------
default_take_profit_levels:
  - 50.0
  - 100.0
  - 200.0
default_stop_loss_pct: -30.0
default_trailing_stop_pct: 0.0
max_holding_seconds: 3600

# -- Circuit breaker ----------------------------------------------------------
circuit_breaker_threshold: 5
circuit_breaker_timeout_seconds: 60

# -- Rate limits (calls per second) -------------------------------------------
rate_limit_birdeye: 1.0
rate_limit_goplus: 0.5
rate_limit_helius: 10.0
rate_limit_basescan: 5.0
rate_limit_dexscreener: 5.0

# -- Heartbeat ----------------------------------------------------------------
heartbeat_interval_seconds: 10.0
heartbeat_timeout_seconds: 30.0

# -- Observability ------------------------------------------------------------
prometheus_port: 8000
log_level: "INFO"
log_format: "json"                 # json | text

# -- Telegram -----------------------------------------------------------------
telegram_bot_token: ""
telegram_chat_id: ""

# -- Idempotency --------------------------------------------------------------
dedup_ttl_seconds: 86400           # 24 h
